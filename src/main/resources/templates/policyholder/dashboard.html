<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/dashboard}">
<head>
    <title>My Dashboard - MediSure</title>
</head>
<body>

<!-- Page Header -->
<div layout:fragment="page-header" class="mb-8">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between">
        <div>
            <h1 class="text-3xl font-bold text-slate-900 mb-2">My Dashboard</h1>
            <p class="text-slate-600">Welcome back! Here's an overview of your health insurance.</p>
        </div>
        <div class="mt-4 md:mt-0 flex gap-3">
            <button onclick="window.location.href='/policyholder/claims/new'" 
                    class="inline-flex items-center gap-2 px-4 py-2 bg-primary-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-primary-700 shadow-lg shadow-primary-500/30">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                File New Claim
            </button>
            <button th:if="${canBookAppointments}" 
                    onclick="window.location.href='/policyholder/appointments/book'" 
                    class="inline-flex items-center gap-2 px-4 py-2 border border-slate-300 rounded-lg text-sm font-medium text-slate-700 hover:bg-slate-50">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
                Book Appointment
            </button>
            <button th:unless="${canBookAppointments}"
                    class="inline-flex items-center gap-2 px-4 py-2 border border-slate-300 rounded-lg text-sm font-medium text-slate-400 cursor-not-allowed opacity-60"
                    disabled
                    title="Available for PREMIUM and SENIOR policy holders only">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                </svg>
                Book Appointment (Locked)
            </button>
        </div>
    </div>
</div>

<!-- Main Content -->
<div layout:fragment="content">
    
    <!-- Quick Stats -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        
        <!-- Active Policies -->
        <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white">
            <div class="flex items-center justify-between mb-4">
                <div class="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center backdrop-blur-sm">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                </div>
            </div>
            <p class="text-sm text-white/80 mb-1">My Policy</p>
            <p class="text-3xl font-bold" th:text="${hasPolicyHolder ? '1' : '0'}">0</p>
            <p class="text-xs text-white/60 mt-2" th:text="${hasPolicyHolder ? (policyStatus != null and policyStatus.toString() == 'ACTIVE' ? 'Policy is active' : (policyStatus != null ? policyStatus.toString() : 'Unknown')) : 'No policy purchased'}">No policy purchased</p>
        </div>
        
        <!-- Total Claims -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center justify-between mb-4">
                <div class="w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center">
                    <svg class="w-6 h-6 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                    </svg>
                </div>
                <span th:if="${activeClaims > 0}" class="px-2 py-1 text-xs font-semibold text-amber-700 bg-amber-100 rounded-full">In Progress</span>
            </div>
            <p class="text-sm font-medium text-slate-600 mb-1">Active Claims</p>
            <p class="text-3xl font-bold text-slate-900" th:text="${activeClaims}">0</p>
            <p class="text-xs text-slate-500 mt-2" th:text="${activeClaims > 0 ? 'Awaiting review' : 'No active claims'}">No active claims</p>
        </div>
        
        <!-- Upcoming Appointments -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center justify-between mb-4">
                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                </div>
            </div>
            <p class="text-sm font-medium text-slate-600 mb-1">Upcoming Appointments</p>
            <p class="text-3xl font-bold text-slate-900" th:text="${upcomingAppointments}">0</p>
            <p class="text-xs text-slate-500 mt-2" th:if="${hasNextAppointment}" 
               th:text="'Next: ' + ${#temporals.format(nextAppointment.appointmentDate, 'MMM dd')} + ' at ' + ${#temporals.format(nextAppointment.appointmentTime, 'hh:mm a')}">Next: No appointments</p>
            <p class="text-xs text-slate-500 mt-2" th:unless="${hasNextAppointment}">No upcoming appointments</p>
        </div>
        
        <!-- Coverage Used -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center justify-between mb-4">
                <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                    <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                </div>
            </div>
            <p class="text-sm font-medium text-slate-600 mb-1">Coverage Used</p>
            <p class="text-3xl font-bold text-slate-900" th:text="${#numbers.formatDecimal(coverageUsedPercentage, 1, 1)} + '%'">0%</p>
            <div class="mt-3 bg-slate-100 rounded-full h-2">
                <div class="bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full" 
                     th:style="'width: ' + ${coverageUsedPercentage} + '%'"></div>
            </div>
        </div>
    </div>
    
    <!-- My Policies and Next Appointment -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        
        <!-- My Policies -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-200">
            <div class="px-6 py-4 border-b border-slate-200 flex items-center justify-between">
                <h3 class="text-lg font-semibold text-slate-900">My Policy</h3>
                <a href="/policyholder/policies" class="text-sm text-primary-600 hover:text-primary-700 font-medium">View Details</a>
            </div>
            <div class="p-6 space-y-4">
                
                <!-- Policy Card - Real Data -->
                <div th:if="${hasPolicyHolder}" class="border border-slate-200 rounded-lg p-4 hover:border-primary-300 hover:shadow-md transition">
                    <div class="flex items-start justify-between mb-3">
                        <div>
                            <h4 class="font-semibold text-slate-900" th:text="${myPolicy.name}">Policy Name</h4>
                            <p class="text-sm text-slate-600" th:text="'POL-' + ${policyHolder.id}">POL-000</p>
                        </div>
                        <span th:classappend="${policyStatus != null and policyStatus.toString() == 'ACTIVE' ? 'text-green-700 bg-green-100' : 
                                              (policyStatus != null and policyStatus.toString() == 'EXPIRED' ? 'text-red-700 bg-red-100' : 
                                              'text-gray-700 bg-gray-100')}" 
                              class="px-2 py-1 text-xs font-semibold rounded-full" 
                              th:text="${policyStatus}">Status</span>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-3">
                        <div>
                            <p class="text-xs text-slate-500">Coverage Amount</p>
                            <!-- Fixed: Using locale-aware formatting (minIntegerDigits=1, minDecimalDigits=0, locale='en') -->
                            <p class="text-sm font-semibold text-slate-900" th:text="'$' + ${#numbers.formatDecimal(myPolicy.coverageAmount, 1, 0, 'en')}">$0</p>
                        </div>
                        <div>
                            <p class="text-xs text-slate-500">Premium</p>
                            <!-- Fixed: Using locale-aware formatting (minIntegerDigits=1, minDecimalDigits=0, locale='en') -->
                            <p class="text-sm font-semibold text-slate-900" th:text="'$' + ${#numbers.formatDecimal(myPolicy.premiumAmount, 1, 0, 'en')} + '/month'">$0/month</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-3">
                        <div>
                            <p class="text-xs text-slate-500">Policy Type</p>
                            <p class="text-sm font-semibold text-slate-900" th:text="${myPolicy.type}">Type</p>
                        </div>
                        <div>
                            <p class="text-xs text-slate-500">Duration</p>
                            <p class="text-sm font-semibold text-slate-900" th:text="${myPolicy.durationMonths} + ' months'">0 months</p>
                        </div>
                    </div>
                    <div class="flex items-center justify-between pt-3 border-t border-slate-100">
                        <div class="text-xs text-slate-600">
                            Valid until: <span class="font-semibold" th:text="${#temporals.format(policyHolder.endDate, 'MMM dd, yyyy')}">-</span>
                        </div>
                        <a href="/policyholder/policies" class="text-xs text-primary-600 hover:text-primary-700 font-medium">View Details</a>
                    </div>
                </div>
                
                <!-- No Policy Message -->
                <div th:unless="${hasPolicyHolder}" class="text-center py-8">
                    <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-3">
                        <svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                    </div>
                    <p class="text-slate-600 mb-4">You don't have an active policy yet</p>
                    <a href="/policyholder/policies" class="inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition">
                        Browse Available Policies
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Next Appointment & Quick Actions -->
        <div class="space-y-6">
            
            <!-- Next Appointment - Real Data -->
            <div th:if="${hasNextAppointment}" class="bg-gradient-to-br from-primary-500 to-primary-700 rounded-xl shadow-lg p-6 text-white">
                <div class="flex items-start justify-between mb-4">
                    <div>
                        <p class="text-sm text-white/80 mb-1">Next Appointment</p>
                        <h3 class="text-xl font-bold" th:text="${#temporals.format(nextAppointment.appointmentDate, 'MMM dd, yyyy')} + ' at ' + ${#temporals.format(nextAppointment.appointmentTime, 'hh:mm a')}">Date &amp; Time</h3>
                    </div>
                    <div class="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center backdrop-blur-sm">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                    </div>
                </div>
                <div class="space-y-3">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center">
                            <svg class="w-5 h-5 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                            </svg>
                        </div>
                        <div>
                            <p class="font-semibold" th:text="'Dr. ' + ${nextAppointment.doctor.user.fullName}">Doctor Name</p>
                            <p class="text-sm text-white/80" th:text="${nextAppointment.reason ?: nextAppointment.doctor.specialization}">Reason</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 text-sm text-white/90" th:if="${nextAppointment.notes}">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/>
                        </svg>
                        <span th:text="${nextAppointment.notes}">Notes</span>
                    </div>
                </div>
                <div class="flex gap-3 mt-6">
                    <a href="/policyholder/appointments" class="flex-1 px-4 py-2 bg-white text-primary-700 rounded-lg font-semibold hover:bg-white/90 transition text-center">
                        View Details
                    </a>
                    <button class="px-4 py-2 bg-white/20 text-white rounded-lg font-semibold hover:bg-white/30 backdrop-blur-sm transition">
                        Reschedule
                    </button>
                </div>
            </div>
            
            <!-- No Appointment Message -->
            <div th:unless="${hasNextAppointment}" class="bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl shadow-sm border border-slate-200 p-6">
                <div class="text-center py-4">
                    <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-3">
                        <svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <p class="text-slate-600 font-medium mb-2">No Upcoming Appointments</p>
                    <p class="text-sm text-slate-500 mb-4" th:text="${canBookAppointments ? 'Schedule your next checkup today' : 'Upgrade to PREMIUM or SENIOR policy to book appointments'}">Schedule your next checkup today</p>
                    <a th:if="${canBookAppointments}" 
                       href="/policyholder/appointments/book" 
                       class="inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                        </svg>
                        Book Appointment
                    </a>
                    <div th:unless="${canBookAppointments}" 
                         class="inline-flex items-center px-4 py-2 bg-slate-300 text-slate-500 rounded-lg cursor-not-allowed">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                        </svg>
                        PREMIUM/SENIOR Only
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-4">Quick Actions</h3>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="window.location.href='/policyholder/claims/new'" 
                            class="flex flex-col items-center gap-2 p-4 border border-slate-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition">
                        <div class="w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <span class="text-sm font-medium text-slate-900">File Claim</span>
                    </button>
                    
                    <button th:if="${canBookAppointments}" 
                            onclick="window.location.href='/policyholder/appointments/book'" 
                            class="flex flex-col items-center gap-2 p-4 border border-slate-200 rounded-lg hover:border-green-300 hover:bg-green-50 transition">
                        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                        <span class="text-sm font-medium text-slate-900">Book Appt.</span>
                    </button>
                    <div th:unless="${canBookAppointments}"
                         class="flex flex-col items-center gap-2 p-4 border border-slate-200 rounded-lg bg-slate-50 opacity-60 cursor-not-allowed"
                         title="Available for PREMIUM and SENIOR policy holders only">
                        <div class="w-10 h-10 bg-slate-200 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                            </svg>
                        </div>
                        <span class="text-sm font-medium text-slate-400">Book Appt.</span>
                    </div>
                    
                    <button onclick="window.location.href='/policyholder/documents'" 
                            class="flex flex-col items-center gap-2 p-4 border border-slate-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 transition">
                        <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"/>
                            </svg>
                        </div>
                        <span class="text-sm font-medium text-slate-900">Documents</span>
                    </button>
                    
                    <button onclick="window.location.href='/policyholder/policies'" 
                            class="flex flex-col items-center gap-2 p-4 border border-slate-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition">
                        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                        </div>
                        <span class="text-sm font-medium text-slate-900">My Policies</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Recent Claims - Real Data -->
    <div class="bg-white rounded-xl shadow-sm border border-slate-200">
        <div class="px-6 py-4 border-b border-slate-200 flex items-center justify-between">
            <h3 class="text-lg font-semibold text-slate-900">Recent Claims</h3>
            <a href="/policyholder/claims" class="text-sm text-primary-600 hover:text-primary-700 font-medium">View All</a>
        </div>
        
        <!-- Claims Table -->
        <div th:if="${recentClaims != null and !recentClaims.isEmpty()}" class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-slate-50 border-b border-slate-200">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Claim ID</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Hospital</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Amount</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Submitted</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Status</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Actions</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-200">
                    <tr th:each="claim : ${recentClaims}" class="hover:bg-slate-50 transition">
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900" th:text="'#CLM-' + ${claim.id}">#CLM-000</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="text-sm text-slate-700" th:text="${claim.hospitalName ?: 'N/A'}">Hospital</span>
                        </td>
                        <!-- Fixed: Using locale-aware formatting (minIntegerDigits=1, minDecimalDigits=2, locale='en') for claim amounts with decimals -->
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-semibold text-slate-900" th:text="'$' + ${#numbers.formatDecimal(claim.amountClaimed, 1, 2, 'en')}">$0.00</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-700" th:text="${#temporals.format(claim.createdAt, 'MMM dd, yyyy')}">Date</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span th:classappend="${claim.status.toString() == 'SUBMITTED' ? 'text-blue-700 bg-blue-100' :
                                                  claim.status.toString() == 'UNDER_REVIEW' ? 'text-amber-700 bg-amber-100' :
                                                  claim.status.toString() == 'APPROVED_BY_FINANCE' ? 'text-green-700 bg-green-100' :
                                                  claim.status.toString() == 'REJECTED' ? 'text-red-700 bg-red-100' :
                                                  'text-purple-700 bg-purple-100'}"
                                  class="px-2 py-1 text-xs font-semibold rounded-full"
                                  th:text="${claim.status.toString().replace('_', ' ')}">Status</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                            <a th:href="@{/policyholder/claims/{id}(id=${claim.id})}" class="text-primary-600 hover:text-primary-900 font-medium">View</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- No Claims Message -->
        <div th:if="${recentClaims == null or recentClaims.isEmpty()}" class="text-center py-12">
            <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                </svg>
            </div>
            <p class="text-slate-600 font-medium mb-2">No Claims Yet</p>
            <p class="text-sm text-slate-500 mb-4">You haven't filed any insurance claims</p>
            <a href="/policyholder/claims/new" class="inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                </svg>
                File Your First Claim
            </a>
        </div>
    </div>
</div>

</body>
</html>

